### 什么是执行上下文？

当前 JavaScript 代码被解析和执行所在环境的抽象概念

JavaScript 代码都是在执行上下文中运行的，执行上下文就是指当前环境中的变量、函数声明、作用域链、this 等信息

### 执行上下文分类？

1. 全局执行上下文：只有一个，浏览器环境下为 window
2. 函数执行上下文：存在无数个，每当一个函数**被调用**时，都会为该函数创建一个新的上下文
3. eval 执行上下文：运行在 eval 函数中的代码

对于每个执行上下文，都有变量对象、作用域链、this 这三个属性

### 执行上下文的特点

1. 单线程，只在主线程上运行
2. 同步执行，从上向下按顺序执行
3. 全局上下文只有一个，也就是 window 对象
4. 函数每调用一次就会产生一个新的执行上下文环境

### 什么是执行栈？

是一种**先进后出**的数据结构，用来存储代码运行的所有执行上下文

1. 当 JS 引擎第一次遇到 js 脚本时，会创建一个全局的执行上下文并压入当前执行栈
2. 每当 JS 引擎调用一个函数的时候，会为该函数创建一个新的执行上下文并压入栈的顶部
3. 当该函数执行结束，执行上下文从栈中弹出，控制流程到达当前栈中的下一个上下文中
4. 一旦所有代码都执行完毕，JS 引擎从当前栈中移除全局执行上下文

### 执行上下文的生命周期？

主要分为两个阶段：

1.创建阶段：在这个阶段生成变量对象，建立作用域链，确定 this 指向

2.执行阶段：对变量进行赋值，函数引用，执行其它代码

![image](assets/image-20230906143702-zb6ghd0.png)

### 什么是变量对象？

变量对象是和执行上下文相关的数据作用域，存储了上下文中定义的变量和函数声明

是一个抽象的概念，在全局执行上下文中，变量对象就是全局对象，在顶层 js 代码中，this 指向全局对象，全局变量会作为该对象的属性来被查询，在浏览器中，window 就是全局对象。
